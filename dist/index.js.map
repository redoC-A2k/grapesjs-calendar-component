{"version":3,"file":"index.js","mappings":"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","sources":["webpack://grapesjs-calendar-component/webpack/universalModuleDefinition","webpack://grapesjs-calendar-component/webpack/bootstrap","webpack://grapesjs-calendar-component/webpack/runtime/define property getters","webpack://grapesjs-calendar-component/webpack/runtime/hasOwnProperty shorthand","webpack://grapesjs-calendar-component/webpack/runtime/make namespace object","webpack://grapesjs-calendar-component/./src/consts.ts","webpack://grapesjs-calendar-component/./src/components.ts","webpack://grapesjs-calendar-component/./src/index.ts","webpack://grapesjs-calendar-component/./src/blocks.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grapesjs-calendar-component\"] = factory();\n\telse\n\t\troot[\"grapesjs-calendar-component\"] = factory();\n})(typeof globalThis !== 'undefined' ? globalThis : (typeof window !== 'undefined' ? window : this), () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export const calendar ={\n    type:\"calendar\",\n    name:\"Calendar\",\n    label:\"Calendar\"\n} ","import { calendar } from \"./consts\";\nimport { Editor } from \"grapesjs\";\nimport { PluginOptions } from '.'\n\nfunction serialize(f:any, env:any) {\n    return JSON.stringify({ src: f.toString(), env: env });\n}\n\nexport default (editor: Editor, opts: PluginOptions) => {\n    const domc = editor.DomComponents;\n    let functions: { [key: string]: any } = {}\n    Object.keys(opts).forEach((key: string, val) => {\n        // console.log(key,\" -> \",typeof opts[key])\n        if (typeof opts[key] === \"function\") {\n            functions[key] = serialize(opts[key], {})\n        }\n    })\n    domc.addType(calendar.type, {\n        isComponent: (el) => {\n            if (el.classList && el.classList.contains(\"fcCalendar\")) {\n                console.log(el.classList)\n                return { type: calendar.type };\n            }\n        },\n        model: {\n            defaults: {\n                type: calendar.type,\n                name: calendar.name,\n                droppable: false,\n                attributes: {\n                    \"style\": \"min-width:10%;min-height:30px;\",\n                    \"data-gjs-editable\": \"false\",\n                    \"class\": \"fcCalendar\",\n                },\n                options: opts,\n                functions,\n                'script-props': ['options', 'functions'],\n                script: function (arg: any) {\n                    function parse(serialized: string) {\n                        var parsed = JSON.parse(serialized);\n                        return createFunction(parsed.src, parsed.env);\n                    }\n\n                    function createFunction(src: any, env: any) {\n                        return (new Function(createFunctionBody(src, env))(env));\n                    }\n\n                    function createFunctionBody(src: any, env: any) {\n                        return '\"use strict\";\\n' + Object.keys(env).reduceRight(addVar, 'return ' + src + ';');\n                    }\n\n                    function addVar(s: any, k: any) {\n                        return 'var ' + k + ' = arguments[0].' + k + ';\\n' + s;\n                    }\n                    const el = this;\n                    Object.keys(arg.functions).forEach((key: string, val) => {\n                        arg.functions[key] = parse(arg.functions[key])\n                    })\n                    try {\n                        let calendarOpts = {\n                            initialView: 'dayGridMonth',\n                        }\n                        //TODO: check each option\n                        Object.assign(calendarOpts, arg.options)\n                        Object.assign(calendarOpts, arg.functions)\n                        //@ts-ignore\n                        let calendar = new FullCalendar.Calendar(el, calendarOpts);\n                        calendar.render()\n                    } catch (error) {\n                        console.log(error)\n                    }\n                },\n                init() {\n                    console.log(\"init calendar\")\n                }\n            }\n        }\n    })\n}","import loadBlocks from './blocks';\nimport loadComponents from './components';\nimport { Plugin } from 'grapesjs'\n\nexport type PluginOptions = {\n    [key: string]: any\n}\n\nconst CalendarPlugin: Plugin<PluginOptions> = (editor, opts) => {\n    const options = {};\n    // for (let name in options) {\n    //     if (!(name in opts))\n    //         opts[name] = options[name];\n    // }\n    loadComponents(editor, opts);\n    loadBlocks(editor, opts);\n}\n\nexport default CalendarPlugin;","import { Editor } from \"grapesjs\";\nimport { calendar } from \"./consts\";\nimport { PluginOptions } from \".\";\n\nexport default (editor:Editor, opts:PluginOptions) => {\n    const bm = editor.BlockManager;\n    bm.add(calendar.name, {\n        media: `<svg id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 117.79 122.88\"><title>date-reminder</title><path d=\"M89.34,55a22.54,22.54,0,0,1,2.6.84,24.94,24.94,0,0,1,3.55,1.76l.13.09a23.5,23.5,0,0,1,3,2.2,23.15,23.15,0,0,1,2.73,2.78h0a23,23,0,0,1,2.22,3.19,26,26,0,0,1,1.68,3.54h0a22.66,22.66,0,0,1,1.07,3.87,23,23,0,0,1,.36,4.09v4.43c0,1.41,0,2.79,0,4.14h0a32.3,32.3,0,0,0,.24,3.67,29.64,29.64,0,0,0,.65,3.52h0a17.77,17.77,0,0,0,1.15,3.21,20.85,20.85,0,0,0,1.8,3.11h0a18.94,18.94,0,0,0,2.63,2.94,30.26,30.26,0,0,0,3.78,2.94,1.79,1.79,0,0,1-1,3.28H51.14a1.8,1.8,0,0,1-.93-3.34A33.86,33.86,0,0,0,54,102.38a18.05,18.05,0,0,0,2.61-3l.06-.09a21.54,21.54,0,0,0,1.74-3,18.91,18.91,0,0,0,1.17-3.23s0,0,0-.07a25,25,0,0,0,.63-3.4,29.64,29.64,0,0,0,.23-3.7V77.39a23.46,23.46,0,0,1,.36-4.09,22.55,22.55,0,0,1,1.08-3.89,25.4,25.4,0,0,1,1.7-3.57,22.79,22.79,0,0,1,2.24-3.21h0a23.21,23.21,0,0,1,2.74-2.78,23.68,23.68,0,0,1,3.19-2.29,22.83,22.83,0,0,1,3.59-1.74A20.91,20.91,0,0,1,78,55a5.45,5.45,0,0,1,1.59-2.63,6.74,6.74,0,0,1,8.17,0A5.35,5.35,0,0,1,89.34,55ZM64.28,3.74c0-2.05,2-3.74,4.57-3.74s4.56,1.67,4.56,3.74V20.09c0,2.05-2,3.74-4.56,3.74s-4.57-1.67-4.57-3.74V3.74Zm-51,68.18H23.69a1.21,1.21,0,0,1,1.21,1.21v7.72a1.21,1.21,0,0,1-1.21,1.21H13.24A1.21,1.21,0,0,1,12,80.85V73.13a1.21,1.21,0,0,1,1.21-1.21Zm40-22H63.7a1.22,1.22,0,0,1,.83.33,37.23,37.23,0,0,0-10.47,9.81h-.81a1.2,1.2,0,0,1-1.2-1.2V51.13a1.21,1.21,0,0,1,1.2-1.21Zm-20,0H43.7a1.2,1.2,0,0,1,1.2,1.2v7.73a1.2,1.2,0,0,1-1.2,1.2H33.25A1.21,1.21,0,0,1,32,58.85V51.12a1.21,1.21,0,0,1,1.21-1.2Zm-20,0H23.69a1.21,1.21,0,0,1,1.21,1.2v7.73a1.21,1.21,0,0,1-1.21,1.2H13.24A1.21,1.21,0,0,1,12,58.85V51.12a1.21,1.21,0,0,1,1.21-1.2Zm20,22H43.7a1.21,1.21,0,0,1,1.2,1.21v7.72a1.21,1.21,0,0,1-1.2,1.21H33.25A1.21,1.21,0,0,1,32,80.85V73.13a1.21,1.21,0,0,1,1.21-1.21ZM23.34,3.74c0-2.05,2-3.74,4.56-3.74s4.56,1.67,4.56,3.74V20.09c0,2.05-2,3.74-4.56,3.74s-4.56-1.67-4.56-3.74V3.74ZM5,35.74H91.84V16.93a2.23,2.23,0,0,0-.68-1.62,2.28,2.28,0,0,0-1.62-.68H81.22a2.53,2.53,0,0,1,0-5.05h8.32A7.37,7.37,0,0,1,96.91,17V46.83a37.94,37.94,0,0,0-5.13-1.37V40.79H5V89.54a2.26,2.26,0,0,0,.67,1.62,2.32,2.32,0,0,0,1.63.68H48.57a37,37,0,0,0,1.77,5.1h-43A7.36,7.36,0,0,1,0,89.58V17A7.37,7.37,0,0,1,7.36,9.58h8.89a2.53,2.53,0,0,1,0,5.05H7.36a2.27,2.27,0,0,0-1.62.68,2.32,2.32,0,0,0-.67,1.62V35.75H5ZM39.74,14.62a2.53,2.53,0,0,1,0-5H56.69a2.53,2.53,0,1,1,0,5Zm54,99.9a10.08,10.08,0,0,1-1.18,3.23,10.38,10.38,0,0,1-2.3,2.72,10.08,10.08,0,0,1-3.09,1.81,10.46,10.46,0,0,1-3.55.6,10.62,10.62,0,0,1-3.55-.6,10.27,10.27,0,0,1-6.59-7.87,1.1,1.1,0,0,1,.89-1.27l.19,0H92.64a1.1,1.1,0,0,1,1.1,1.1,1,1,0,0,1,0,.3Zm-3.38-54a18.73,18.73,0,0,0-2.91-.88,1.72,1.72,0,0,1-1.48-1.49,2.45,2.45,0,0,0-.64-1.58,2.5,2.5,0,0,0-1.63-.46,2.42,2.42,0,0,0-1.61.43,2.45,2.45,0,0,0-.63,1.59h0A1.71,1.71,0,0,1,80,59.65a18,18,0,0,0-3.1.87,18.51,18.51,0,0,0-2.87,1.39,19.72,19.72,0,0,0-2.57,1.85A18.89,18.89,0,0,0,69.26,66h0a18.79,18.79,0,0,0-1.8,2.6,19.83,19.83,0,0,0-1.38,2.9,17.49,17.49,0,0,0-.87,3.1,18.36,18.36,0,0,0-.28,3.3V86a32.15,32.15,0,0,1-.24,4,31.15,31.15,0,0,1-.7,3.69s0,0,0,.08a21.93,21.93,0,0,1-1.33,3.65,24.27,24.27,0,0,1-1.93,3.38.61.61,0,0,0-.07.1,21.11,21.11,0,0,1-3,3.37l0,0h51.92a21.17,21.17,0,0,1-3-3.34h0a24,24,0,0,1-2-3.47,21,21,0,0,1-1.33-3.67h0a29.31,29.31,0,0,1-.7-3.78,34.61,34.61,0,0,1-.24-3.9h0c0-1.27,0-2.6,0-4,0-2.56,0-4,0-4.23a17.93,17.93,0,0,0-.29-3.3,16.8,16.8,0,0,0-.85-3.07h0a19,19,0,0,0-3.15-5.47h0a18.53,18.53,0,0,0-2.2-2.23A19.45,19.45,0,0,0,93.29,62L93.18,62a22.41,22.41,0,0,0-2.87-1.41Z\"/></svg>`,\n        label: calendar.label,\n        category: 'Extra',\n        content:{type:calendar.type},\n        select:true\n    })\n}"],"names":["root","factory","exports","module","define","amd","globalThis","window","this","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","calendar","editor","opts","domc","DomComponents","functions","keys","forEach","val","f","env","JSON","stringify","src","toString","addType","isComponent","el","classList","contains","console","log","type","model","defaults","name","droppable","attributes","options","script","arg","parse","serialized","parsed","Function","reduceRight","addVar","createFunctionBody","createFunction","s","k","calendarOpts","initialView","assign","FullCalendar","Calendar","render","error","init","BlockManager","add","media","label","category","content","select"],"sourceRoot":""}